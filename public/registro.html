<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro | Abarrotes El Buen Precio</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/registro.css" />
  </head>
  <body>
    <div class="contenedor-principal">
      <div class="cuadro-naranja">
        <h1 class="titulo-principal">REGISTRO DE USUARIOS</h1>

        <div class="leyenda">
          ABARROTES EL BUEN PRECIO<br />Y LOS MEJORES PRODUCTOS AL MEJOR PRECIO
        </div>

        <img src="img/logo.png" alt="Logo" class="logo" />
        <br />

        <form id="signup-form" class="formulario-registro">
          <label for="nombre">Nombre Completo:</label>
          <input type="text" id="name" required />

          <label for="email">Correo Electrónico:</label>
          <input type="email" id="email" required />

          <label for="password">Contraseña:</label>
          <input type="password" id="password" required />

          <small id="passwordHelp" class="password-help">
          La contraseña debe tener mínimo 8 caracteres, al menos 1 mayúscula, 1 minúscula y 1 número.
          </small>

          <label for="confirmar-password">Confirmar Contraseña:</label>
          <input type="password" id="confirm-password" required />

          <label for="telefono">Teléfono:</label>
          <input type="tel" id="phone" />

          <label for="direccion">Dirección:</label>
          <textarea id="address"></textarea>

          <button type="submit" class="btn-registrar">Registrarse</button>
        </form>
      </div>
    </div>

    <script src="js/requests.js"></script>
    <script>
      const nameInput = document.getElementById('name');
      const emailInput = document.getElementById('email');
      const passwordInput = document.getElementById('password');
      const confirmPasswordInput = document.getElementById('confirm-password');
      const phoneInput = document.getElementById('phone');
      const addressInput = document.getElementById('address');
      document.getElementById('signup-form')
      .addEventListener('submit', function (event) {
        event.preventDefault();
        if (passwordInput.value !== confirmPasswordInput.value) {
          alert("Las contraseñas no coinciden");
          return;
        }
        signupRequest(
          nameInput.value,
          emailInput.value,
          passwordInput.value,
          phoneInput.value,
          addressInput.value
        ).then(res => {
          if (res.status == 201)
            window.location.href = '/';
          else
            alert(res.body.error);
        }).catch(() => {});
      });
    </script>
  </body>
</html>
